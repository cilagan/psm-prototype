<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:security="http://www.springframework.org/schema/security"
	xmlns:tx="http://www.springframework.org/schema/tx"  
	xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

	<description>Spring Configuration for Notification and Request Business Service (Test Version)</description>
	
	<context:annotation-config/>
	<!-- Property Files -->
	<context:property-placeholder location="classpath*:devt-nr-business.properties" ignore-unresolvable="false"/>

	<!-- ==================================================================	-->
    <!-- 	NR Services and DAO												-->
	<!-- ==================================================================	-->
	<bean id="UserDataService" class="gov.nsf.research.notificationrequest.business.service.impl.UserDataServiceWSImpl"/>
	<bean id="NRBusinessService" class="gov.nsf.research.notificationrequest.business.service.impl.NRBusinessServiceImpl"/>
	<bean id="GLTransactionService" class="gov.nsf.research.notificationrequest.business.service.impl.GLTransactionServiceWSImpl"/>
	<bean id="prsService" class="gov.nsf.research.notificationrequest.business.service.impl.ProjectReportServiceWSImpl"/>

	<bean id="NotificationRequestDao" class="gov.nsf.research.notificationrequest.business.dao.impl.NotificationRequestDaoImpl"/>
	<bean id="NRPARSDao" class="gov.nsf.research.notificationrequest.business.dao.impl.NRPARSDaoImpl"/>
	
	<!-- ================================================================== -->
	<!-- 	Log Level Manager												-->
	<!-- ================================================================== -->
	<bean id="logLevelManager" class="gov.nsf.research.notificationrequest.business.service.impl.Log4jLogLevelManagerImpl"/>
	
	<!-- ================================================================== -->
	<!-- 	JDBC Templates 													-->
	<!-- ================================================================== -->
	<bean id="NRFLJDBCTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
		<property name="dataSource" ref="NRFLDataSource" />
	</bean>
	
	<bean id="NRPARSJDBCTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
		<property name="dataSource" ref="NRPARSDataSource" />
	</bean>			

	<!-- ================================================================== -->
	<!-- 	Data Sources 													-->
	<!-- ================================================================== -->
    <bean id="NRFLDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"/>

    <bean id="NRPARSDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"/>
    
	<!-- ================================================================== -->
	<!-- 	WS Templates													-->
	<!-- ================================================================== -->
	 <bean id="udsWSTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
		<property name="defaultUri" value="${nr.uds.endpoint}"/>
		<property name="messageSender">
			  <bean class="org.springframework.ws.transport.http.CommonsHttpMessageSender">
				<property name="credentials">
			    	<bean class="org.apache.commons.httpclient.UsernamePasswordCredentials">
			        	<constructor-arg value="${nr.uds.username}"/>
			            <constructor-arg value="${nr.uds.password}"/>
					</bean>
			     </property>
			</bean>
		</property> 
        <property name="marshaller" ref="udsMarshaller"/>
        <property name="unmarshaller" ref="udsMarshaller"/>
     </bean>
     
     <bean id="udsMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
		<property name="contextPath" value="gov.nsf.research.services.userdataservice.v11"/>
    </bean>
    
        <!-- ================================================================== -->
	<!-- 	GL Transaction WS Templates										-->
	<!-- ================================================================== -->	
	<bean id="glWSTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
		<property name="defaultUri" value="${nr.gl.endpoint}"/>
		<property name="messageSender">
			<bean class="org.springframework.ws.transport.http.CommonsHttpMessageSender">
				<property name="credentials">
					<bean class="org.apache.commons.httpclient.UsernamePasswordCredentials">
						<constructor-arg value="${nr.gl.username}"/>
			            <constructor-arg value="${nr.gl.password}"/>
					</bean>
				</property>
			</bean>
		</property>	
		<property name="marshaller" ref="glTranSvcMarshaller"/>
		<property name="unmarshaller" ref="glTranSvcMarshaller"/>
	</bean>
	
	<bean id="glTranSvcMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
		<property name="contextPath" value="gov.nsf.research.services.financial.gl"/>
	</bean>
    
    <bean id="glWSAppSrvrTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
		<property name="defaultUri" value="${nr.gl.glassfish.endpoint}"/>
		<property name="marshaller" ref="glTranSvcMarshaller"/>
		<property name="unmarshaller" ref="glTranSvcMarshaller"/>
	</bean>
	
    <!-- ================================================================== -->
	<!-- 	PRS Web Service Client 											-->
	<!-- ================================================================== -->	

	<bean id="prsWSClient" class="gov.nsf.research.prs.ws.client.PRSWSClientImpl"/>
	
	<!-- ================================================================== -->
	<!-- 	Email Configurations											-->
	<!-- ================================================================== -->
    <bean id="emailService" class="gov.research.email.service.impl.EmailServiceImpl"/>
    <bean id="mailSender" class="gov.nsf.research.notificationrequest.business.test.common.MockMailSender"/>
    
	<!-- Velocity Engine -->
    <bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
      	<property name="velocityProperties">
			<value>
			resource.loader=class
			class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
			</value>
      	</property>
    </bean>
    
</beans>